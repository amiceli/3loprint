webpackJsonp([1],{0:function(t,e,n){t.exports=n("NHnr")},"8tYR":function(t,e){},JyME:function(t,e){},Lb5B:function(t,e){},MgF7:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("EuXz");var r=n("/5sW"),a={name:"Navbar"},o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-menu",{attrs:{mode:"horizontal",router:!0,"default-active":"home"}},[n("el-menu-item",{attrs:{index:"/home"}},[t._v("\n        Home\n    ")]),n("el-menu-item",{attrs:{index:"/about"}},[t._v("\n        About\n    ")])],1)},i=[],s=n("XyMi");function c(t){n("fZI6")}var l=!1,u=c,d=null,f=null,h=Object(s["a"])(a,o,i,l,u,d,f),m=h.exports,v={name:"app",components:{Navbar:m}},p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-header",[n("Navbar")],1),n("el-main",[n("router-view")],1)],1)},g=[];function y(t){n("XXiO")}var b=!1,_=y,k="data-v-0f69f632",C=null,w=Object(s["a"])(v,p,g,b,_,k,C),S=w.exports,$=n("/ocq"),x=(n("y9m4"),n("NYxO")),B=n("mtWM"),I=n.n(B),z=I.a.create({baseURL:"https://api.trello.com"}),L={listBoards:function(t,e,n){return z.get("/1/organizations/".concat(n,"/boards/"),{params:{key:t,token:e}})},getBoard:function(t,e,n,r){return z.get("/1/boards/".concat(r),{params:{key:t,token:e}})},getBoardCards:function(t,e,n,r){return z.get("/1/boards/".concat(r,"/cards?checklists=all"),{params:{key:t,token:e}})},getBoardLists:function(t,e,n,r){return z.get("/1/boards/".concat(r,"/lists"),{params:{key:t,token:e}})},checkTokenAndSecret:function(t,e,n){return z.get("/1/organizations/".concat(n),{params:{key:t,token:e}})},getMembers:function(t,e,n){return z.get("/1/organizations/".concat(n,"/members"),{params:{key:t,token:e}})}},O=n("Wa/L"),E=new O["a"]("trello"),F={getConfig:function(){return E.get("1")},saveConfig:function(t){var e={_id:"1",key:t.key,token:t.token,organization:t.organization};return E.put(e)}};r["default"].use(x["a"]);var j=new x["a"].Store({state:{key:"",secret:"",organization:""},mutations:{saveConfig:function(t,e){return t.key=e.key,t.secret=e.secret,t.organization=e.organization,F.saveConfig(e)},updateConfig:function(t,e){t.key=e.key,t.secret=e.secret,t.organization=e.organization}},actions:{getConfig:function(t){var e=t.commit;return new Promise(function(t,n){F.getConfig().then(function(n){e("updateConfig",n),t()}).catch(function(t){console.error("Unable to retrieve your config",t),n()})})},saveConfig:function(t,e){var n=t.commit;return L.checkTokenAndSecret(e.key,e.token,e.organization).then(function(){n("saveConfig",e)}).catch(function(t){console.error("Something failed with trello api",t)})}}}),P={data:function(){return{configForm:{key:"",token:"",organization:""},rules:{key:[{required:!0,trigger:"blur",message:"A token is required"}],token:[{required:!0,trigger:"blur",message:"A secret is required"}],organization:[{required:!0,trigger:"blur",message:"An organization name is required"}]}}},store:j,methods:{onSubmit:function(){var t=this,e=this;this.$refs.configForm.validate(function(n){if(!n)return t.$message.error("Oops, some fields are invalid"),!1;t.$store.dispatch("saveConfig",t.configForm).then(function(){e.$message.success("Your config is saved")}).catch(function(t){console.error("failed to saved config",t),e.$message.error("Oops, an error occurred. Config not saved")})})}}},T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"config"},[n("h1",[t._v("\n        config your trello access\n    ")]),n("br"),n("el-alert",{attrs:{title:"",type:"info","show-icon":""}},[t._v("\n        First you need api token and secret : "),n("a",{attrs:{href:"https://trello.com/app-key/"}},[t._v("check it")])]),n("br"),n("el-alert",{attrs:{title:"",type:"info","show-icon":""}},[t._v("\n        We not save your access information, all your data are saved "),n("b",[t._v("IN")]),t._v(" your browser, in a\n        "),n("a",{attrs:{href:"https://pouchdb.com/",target:"_blank"}},[t._v("PouchDB database")]),n("br"),t._v("\n        You can delete it, "),n("b",[t._v("when you want")]),t._v(".\n    ")]),n("br"),n("el-form",{ref:"configForm",attrs:{rules:t.rules,model:t.configForm,"label-width":"120px"}},[n("el-form-item",{attrs:{"label-width":"0",prop:"key"}},[n("el-input",{attrs:{placeholder:"Your trello api key"},model:{value:t.configForm.key,callback:function(e){t.$set(t.configForm,"key",e)},expression:"configForm.key"}})],1),n("el-form-item",{attrs:{"label-width":"0",prop:"token"}},[n("el-input",{attrs:{placeholder:"Your trello api token"},model:{value:t.configForm.token,callback:function(e){t.$set(t.configForm,"token",e)},expression:"configForm.token"}})],1),n("el-form-item",{attrs:{"label-width":"0",prop:"organization"}},[n("el-input",{attrs:{placeholder:"Your trello organization name"},model:{value:t.configForm.organization,callback:function(e){t.$set(t.configForm,"organization",e)},expression:"configForm.organization"}})],1),n("el-form-item",{attrs:{"label-width":"0"}},[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("\n                save\n            ")])],1)],1)],1)},M=[];function A(t){n("XU0V")}var N=!1,U=A,R="data-v-d203b048",Y=null,V=Object(s["a"])(P,T,M,N,U,R,Y),q=V.exports,D={props:["message"]},X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"spinner"},[n("svg",{attrs:{width:"300px",height:"150px",viewBox:"0 0 187.3 93.7",preserveAspectRatio:"xMidYMid meet"}},[n("path",{attrs:{stroke:"#409EFF",id:"outline",fill:"none","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10",d:"M93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z"}}),n("path",{attrs:{id:"outline-bg",opacity:"0.05",fill:"none",stroke:"#000","stroke-width":"4","stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":"10",d:"\t\t\t\tM93.9,46.4c9.3,9.5,13.8,17.9,23.5,17.9s17.5-7.8,17.5-17.5s-7.8-17.6-17.5-17.5c-9.7,0.1-13.3,7.2-22.1,17.1 \t\t\t\tc-8.9,8.8-15.7,17.9-25.4,17.9s-17.5-7.8-17.5-17.5s7.8-17.5,17.5-17.5S86.2,38.6,93.9,46.4z"}})]),n("br"),n("p",{staticClass:"message"},[t._v("\n        "+t._s(t.message)+"\n    ")])])},Z=[];function J(t){n("VPBE")}var W=!1,H=J,G="data-v-5a25f7c2",Q=null,K=Object(s["a"])(D,X,Z,W,H,G,Q),tt=K.exports,et=(n("n12u"),n("A0n/"),n("fx22"),n("Z60a")),nt=n.n(et),rt=n("C9uT"),at=n.n(rt),ot=function(){function t(e){nt()(this,t),Object.assign(this,e)}return at()(t,[{key:"getBackgroundStyle",value:function(){return this.prefs.backgroundImage?{backgroundImage:'url("'.concat(this.prefs.backgroundImage,'")')}:{background:this.prefs.backgroundColor}}}]),t}(),it=(n("VjuZ"),/\([^)]*\)|\[[^\]]*\]/g),st=function(){function t(e){nt()(this,t),Object.assign(this,e)}return at()(t,[{key:"hasChecklistsItem",value:function(){var t=0,e=!0,n=!1,r=void 0;try{for(var a,o=this.checklists[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;t+=i.checkItems.length}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t>0}},{key:"getPoints",value:function(){var t=it.exec(this.name);return null!=t&&t.length>0?t[0].replace("(","").replace(")",""):"?"}},{key:"getName",value:function(){return this.name.replace(it,"")}}]),t}(),ct=st;r["default"].use(x["a"]);var lt=new x["a"].Store({state:{boards:[],board:null,members:[],checklistsItem:[]},mutations:{updateBoards:function(t,e){t.boards=e},updateBoard:function(t,e){t.board=e},updateBoardChecklists:function(t,e){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var d,f=s.checklists[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value,m=!0,v=!1,p=void 0;try{for(var g,y=h.checkItems[Symbol.iterator]();!(m=(g=y.next()).done);m=!0){var b=g.value,_=Object.assign({idCard:h.idCard,idShort:s.idShort,checklists:[]},b);t.checklistsItem.push(new ct(_))}}catch(t){v=!0,p=t}finally{try{m||null==y.return||y.return()}finally{if(v)throw p}}}}catch(t){l=!0,u=t}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}}}catch(t){r=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}console.log("state.checklistsItem : ",t.checklistsItem)},updateBoardCards:function(t,e){var n=!0,r=!1,a=void 0;try{for(var o,i=t.board.lists[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value,c=!0,l=!1,u=void 0;try{for(var d,f=e[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;s.id===h.idList&&s.cards.push(new ct(h));var m=!0,v=!1,p=void 0;try{for(var g,y=h.checklists[Symbol.iterator]();!(m=(g=y.next()).done);m=!0)g.value}catch(t){v=!0,p=t}finally{try{m||null==y.return||y.return()}finally{if(v)throw p}}}}catch(t){l=!0,u=t}finally{try{c||null==f.return||f.return()}finally{if(l)throw u}}}}catch(t){r=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},updateBoardLists:function(t,e){t.board.lists=e;var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;s.cards=[]}}catch(t){r=!0,a=t}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},updateMembers:function(t,e){t.members=e}},actions:{listBoards:function(t){var e=t.commit;return F.getConfig().then(function(t){return L.listBoards(t.key,t.token,t.organization).then(function(t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t.data[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;n.push(new ot(c))}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return e("updateBoards",n),t}).catch(function(t){console.error("An error occurred listBoards : ",t)})})},loadBoard:function(t,e){var n=t.commit;return F.getConfig().then(function(t){return L.getBoard(t.key,t.token,t.organization,e).then(function(t){return n("updateBoard",new ot(t.data)),t}).catch(function(t){console.error("An error occurred loadBoard : ",t)})})},loadBoardCards:function(t,e){var n=t.commit;return F.getConfig().then(function(t){return L.getBoardCards(t.key,t.token,t.organization,e).then(function(t){return n("updateBoardCards",t.data),n("updateBoardChecklists",t.data),t}).catch(function(t){console.log("err : ",t)})})},loadBoardLists:function(t,e){var n=t.commit;return F.getConfig().then(function(t){return L.getBoardLists(t.key,t.token,t.organization,e).then(function(t){return n("updateBoardLists",t.data),t}).catch(function(t){console.log("err : ",t)})})},loadMembers:function(t){var e=t.commit;return F.getConfig().then(function(t){return L.getMembers(t.key,t.token,t.organization).then(function(t){return e("updateMembers",t.data),t}).catch(function(t){console.log("err : ",t)})})}}}),ut={store:lt,components:{Spinner:tt},data:function(){return{loading:!0}},mounted:function(){var t=this;this.$store.dispatch("listBoards").then(function(e){t.$notify.success("".concat(e.data.length," boards loaded")),setTimeout(function(){t.loading=!1},1e3)})},computed:{boards:function(){return this.$store.state.boards}},methods:{chooseBoard:function(t){this.$router.push({name:"board",params:{id:t.id}})}}},dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("Spinner",{attrs:{message:"load board list"}}):t._e(),t.loading?t._e():n("div",[n("h1",{staticClass:"display-2"},[t._v("\n            Choose a board\n        ")]),n("br"),t._l(t.boards,function(e){return n("div",{key:e.id,staticClass:"boards",on:{click:function(n){t.chooseBoard(e)}}},[n("el-card",{staticClass:"box-card",style:e.getBackgroundStyle()},[n("span",[t._v("\n                "+t._s(e.name)+"\n            ")])]),n("br")],1)})],2)],1)},ft=[];function ht(t){n("PIuy")}var mt=!1,vt=ht,pt="data-v-b9846106",gt=null,yt=Object(s["a"])(ut,dt,ft,mt,vt,pt,gt),bt=yt.exports,_t={name:"home",store:j,components:{Config:q,Boards:bt},mounted:function(){var t=this;this.$store.dispatch("getConfig").then(function(){t.$notify.success({title:"Cool !",message:"I've found your config"})}).catch(function(){t.$notify.warning({title:"Oops !",message:"No config found"})})},computed:{hasTrelloToken:function(){return""!==this.$store.state.key},hasTrelloSecret:function(){return""!==this.$store.state.secret}}},kt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12,offset:6}},[!1===t.hasTrelloToken||!1===t.hasTrelloSecret?n("Config"):t._e(),t.hasTrelloToken&&t.hasTrelloSecret?n("Boards"):t._e()],1)],1)},Ct=[],wt=!1,St=null,$t=null,xt=null,Bt=Object(s["a"])(_t,kt,Ct,wt,St,$t,xt),It=Bt.exports,zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about"},[n("h1",[t._v("\n        About 3loprint\n    ")]),n("br"),n("h2",[t._v("\n        About me\n    ")]),t._m(0),n("br"),n("h2",[t._v("\n        Why 3loprint ?\n    ")]),t._m(1),t._m(2),n("br"),n("h2",[t._v("\n        About your information\n    ")]),n("el-tag",{attrs:{type:"warning"}},[t._v("Please read it")]),t._m(3),n("br"),n("h2",[t._v("\n        How it works\n    ")]),t._m(4),t._m(5),t._m(6),n("br"),n("h2",[t._v("\n        Technologies\n    ")]),t._m(7)],1)},Lt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        I'm a french developer who loves Vue ecosystem. "),n("br"),t._v("\n        If you want to check my other project : "),n("a",{attrs:{target:"_blank",href:"https://github.com/amiceli"}},[t._v("see my github\n        profile.")]),n("br"),n("br"),t._v("\n        If you want to contact me for 3loprint feel free to open an issue, "),n("br"),t._v("for other thing you contact me on\n        "),n("a",{attrs:{href:"https://www.linkedin.com/in/antoinemiceli/"}},[t._v("linkedin")]),t._v(".\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        In my company we use Scrum as project management methodology. "),n("br"),t._v("\n        So we need to write some post-its for our scrum board.\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        So as my teacher said : "),n("i",[t._v("Developers are lazy")]),t._v(", so I create a tool for that. "),n("br"),t._v("\n        3loprint use Trello API to genrate PDF with your post-its.\n    ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        3loprint use PouchDB, so your Trello information like token and organization name are saved in your browser.\n        "),n("br"),n("b",[t._v("You can delete it when you want !")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        3loprint use some self chosen convention to generate PDF : "),n("br")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("\n            Story points in parenthesis at begin of title: "),n("b",[t._v("(7) ")]),t._v(" Built something awesome\n        ")]),n("li",[t._v("\n            Only story points muse be in parenthesis, nothing else in title\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("b",[t._v("\n            3loprint is currently under development so it only generates user story not dev tasks (checklist on\n            trello).\n        ")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        3loprint is built with Vuejs (also vue-router and vuex) with PouchDB for database. "),n("br"),t._v("\n        Server is built with "),n("a",{attrs:{href:"https://github.com/klein/klein.php",target:"_blank"}},[t._v("Klein.php")]),t._v(".\n    ")])}];function Ot(t){n("Lb5B")}var Et=null,Ft=!1,jt=Ot,Pt="data-v-d11b8292",Tt=null,Mt=Object(s["a"])(Et,zt,Lt,Ft,jt,Pt,Tt),At=Mt.exports,Nt=(n("SldL"),n("7hDC")),Ut=n.n(Nt),Rt=(n("gbyG"),n("Gh7F"),n("beEN"),{components:{Spinner:tt}}),Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ov-spinner"},[n("div",{staticClass:"ov-spinner__wrap"},[n("img",{attrs:{src:"https://media.giphy.com/media/TvLuZ00OIADoQ/giphy.gif",alt:"waiting..."}}),n("br"),n("Spinner",{attrs:{message:"Orcas are generating pdf"}})],1)])},Vt=[];function qt(t){n("8tYR")}var Dt=!1,Xt=qt,Zt="data-v-522d55ca",Jt=null,Wt=Object(s["a"])(Rt,Yt,Vt,Dt,Xt,Zt,Jt),Ht=Wt.exports;n("MfeA");r["default"].use(x["a"]);var Gt=I.a.create({baseURL:"/"}),Qt=new x["a"].Store({state:{selectedCard:[],pdfLink:null},mutations:{setLink:function(t,e){t.pdfLink="/pdf/".concat(e)}},actions:{clearLink:function(t){var e=t.state;e.clearLink=null},selectCard:function(t,e){t.commit;var n=t.state,r=n.selectedCard.indexOf(e);r>=0?n.selectedCard.splice(r,1):n.selectedCard.push(e)},selectList:function(t,e){for(var n=t.state,r=Array.from(e.cards,function(t){return t.id}),a=0;a<r.length;a++){var o=r[a];n.selectedCard.includes(o)||n.selectedCard.push(o)}},generate:function(t,e){var n=t.commit;return Gt.post("/generate",{postIts:e}).then(function(t){n("setLink",t.data)})}}});r["default"].use(x["a"]);var Kt=new x["a"].Store({state:{card:null},mutations:{setCard:function(t,e){t.card=e},emptyCard:function(t){t.card=null}}}),te={store:lt,props:{card:{default:{},type:Object},preview:{default:!1,type:Boolean},pdf:{default:!1,type:Boolean},checklist:{default:!1,type:Boolean},rotate:{default:!0,type:Boolean}},computed:{members:function(){return this.$store.state.members},labels:function(){return this.$store.state.labels}},methods:{isSelected:function(t){return Qt.state.selectedCard.includes(t)},selectCard:function(t,e){Qt.dispatch("selectCard",e.id)},getInitial:function(t){var e=!0,n=!1,r=void 0;try{t:for(var a,o=this.members[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value;if(i.id===t){if(i.fullName.indexOf(" ")>0){var s=i.fullName.match(/\b\w/g)||[];return s=((s.shift()||"")+(s.pop()||"")).toUpperCase(),s}return i.fullName[0].toUpperCase()}}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}},displayTasks:function(){Kt.commit("setCard",this.card)}}},ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"card",class:{"no-rotate":!1===t.rotate,"no-style":t.preview,"pdf-style":t.pdf,hoverable:t.card.hasChecklistsItem()},attrs:{id:"card-"+t.card.id}},[t.card.hasChecklistsItem()&&!1===t.pdf?n("div",{staticClass:"card__overlay",on:{click:function(e){t.displayTasks()}}},[n("div",[n("span",[t._v("\n                See tasks\n            ")]),n("br"),n("font-awesome-icon",{attrs:{icon:"eye",size:"3x"}})],1)]):t._e(),n("div",{staticClass:"card__members"},t._l(t.card.idMembers,function(e){return n("span",[t._v(t._s(t.getInitial(e)))])})),n("div",{staticClass:"card__points"},[n("span",[t._v("\n            "+t._s(t.card.getPoints())+"\n        ")])]),n("div",{staticClass:"card__name"},[t._v("\n        "+t._s(t.card.getName())+"\n    ")]),n("div",{staticClass:"card__labels"},t._l(t.card.labels,function(e){return n("span",{style:{background:t.preview?"transparent":e.color}},[t._v("\n            "+t._s(e.name)+"\n        ")])})),n("div",{staticClass:"card__id"},[n("span",[t._v("\n            #"+t._s(t.card.idShort)+"\n        ")])]),!1===t.checklist?n("div",{staticClass:"card__select"},[n("el-checkbox",{attrs:{value:t.isSelected(t.card.id)},on:{change:function(e){t.selectCard(e,t.card)}}})],1):t._e()])},ne=[];function re(t){n("VUZU")}var ae=!1,oe=re,ie="data-v-1b2d474e",se=null,ce=Object(s["a"])(te,ee,ne,ae,oe,ie,se),le=ce.exports,ue={store:lt,components:{Card:le},computed:{board:function(){return this.$store.state.board},checklistsItem:function(){return this.$store.state.checklistsItem},selectedCards:function(){return Qt.state.selectedCard}}},de=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.board?n("div",{attrs:{id:"lo-checkItems"}},t._l(t.checklistsItem,function(e){return t.selectedCards.includes(e.idCard)?n("Card",{attrs:{card:e,pdf:!0,preview:!0}}):t._e()})):t._e()},fe=[],he=!1,me=null,ve=null,pe=null,ge=Object(s["a"])(ue,de,fe,he,me,ve,pe),ye=ge.exports,be={store:Kt,components:{Card:le},computed:{card:function(){return this.$store.state.card}},methods:{generateCardFromChecklistItem:function(t){return new ct({name:t.name,id:t.id,checklists:[],idShort:this.card.idShort,idMembers:this.card.idMembers})},close:function(){this.$store.commit("emptyCard")}}},_e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"lo-checklists",class:{display:null!=t.card}},[t._m(0),null!=t.card?n("div",{staticClass:"lo-cards"},t._l(t.card.checklists,function(e){return n("div",t._l(e.checkItems,function(e){return n("Card",{key:e.id,attrs:{rotate:!1,checklist:!0,card:t.generateCardFromChecklistItem(e)}})}))})):t._e(),n("footer",[n("el-button",{attrs:{plain:"",type:"primary"},on:{click:function(e){t.close()}}},[t._v("\n            Close\n        ")])],1)])},ke=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",[n("h1",[t._v("\n            Checklists\n        ")])])}];function Ce(t){n("JyME")}var we=!1,Se=Ce,$e="data-v-0fdb5aa9",xe=null,Be=Object(s["a"])(be,_e,ke,we,Se,$e,xe),Ie=Be.exports,ze=n("sTcZ"),Le=n.n(ze),Oe={store:lt,components:{Spinner:tt,Card:le,OverflowSpinner:Ht,Checklists:Ie,PrintChecklists:ye},data:function(){return{loading:!0,message:"load board lists",preview:!1,generating:!1,pdf:!1,link:null,showCheckitems:!1}},methods:{generatePdf:function(){var t=this;this.generating=!0,this.pdf=!0,this.showCheckitems=!0,setTimeout(function(){var e=[],n=document.getElementById("lo-checkItems"),r=!0,a=!1,o=void 0;try{for(var i,s=n.children[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var c=i.value;e.push(Le.a.toJpeg(c))}}catch(t){a=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var l=!0,u=!1,d=void 0;try{for(var f,h=t.selectedCards[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var m=f.value;e.push(Le.a.toJpeg(document.getElementById("card-".concat(m))))}}catch(t){u=!0,d=t}finally{try{l||null==h.return||h.return()}finally{if(u)throw d}}Promise.all(e).then(function(e){Qt.dispatch("generate",{postIts:e}).then(function(){t.pdf=!1,t.generating=!1,t.showCheckitems=!1}).catch(function(){})})},2e3)},clearLink:function(){Qt.dispatch("clearLink")},selectList:function(t){Qt.dispatch("selectList",t)},isSelected:function(t){for(var e=Array.from(t.cards,function(t){return t.id}),n=!0,r=0;r<e.length;r++){var a=e[r];n=n&&Qt.state.selectedCard.includes(a)}return n}},computed:{board:function(){return this.$store.state.board},pdfLink:function(){return Qt.state.pdfLink},selectedCards:function(){return Qt.state.selectedCard},allCards:function(){var t=[],e=!0,n=!1,r=void 0;try{for(var a,o=this.board.lists[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var i=a.value,s=!0,c=!1,l=void 0;try{for(var u,d=i.cards[Symbol.iterator]();!(s=(u=d.next()).done);s=!0){var f=u.value;t.push(f)}}catch(t){c=!0,l=t}finally{try{s||null==d.return||d.return()}finally{if(c)throw l}}}}catch(t){n=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(n)throw r}}return t}},mounted:function(){var t=this;t.$store.dispatch("loadMembers"),function(){var e=Ut()(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$store.dispatch("loadBoard",t.$route.params.id);case 3:return e.next=5,t.$store.dispatch("loadBoardLists",t.$route.params.id);case 5:return e.next=7,t.$store.dispatch("loadBoardCards",t.$route.params.id);case 7:t.loading=!1,e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("An error occurred",e.t0),t.$notify({title:"Oops",message:"Some resources couldn't be loaded",type:"error"}),t.$router.push({name:"home"});case 15:case"end":return e.stop()}},e,this,[[0,10]])}));function n(){return e.apply(this,arguments)}return n}()()}},Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return null!=t.board?n("el-row",{attrs:{gutter:20}},[n("Checklists"),t.loading?n("Spinner",{attrs:{message:t.message}}):t._e(),t.generating?n("OverflowSpinner"):t._e(),t.showCheckitems?n("PrintChecklists"):t._e(),t.loading||null==t.board?t._e():n("el-col",{attrs:{span:20,offset:2}},[n("header",{style:t.board.getBackgroundStyle()},[n("h1",[t._v("\n                "+t._s(t.board.name)+"\n            ")])]),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.preview=!t.preview}}},[n("font-awesome-icon",{attrs:{icon:"eye"}}),t._v("\n            "+t._s(t.preview?"disable preview":"preview card")+"\n        ")],1),n("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.generatePdf()}}},[t._v("\n            generate pdf\n        ")]),null!=t.pdfLink?n("a",{attrs:{href:t.pdfLink,target:"_blank"},on:{click:function(e){t.clearLink()}}},[n("el-button",{attrs:{type:"primary",plain:""}},[t._v("\n                download pdf\n            ")])],1):t._e(),t._l(t.board.lists,function(e){return n("div",{key:e.id},[e.cards.length>0?n("h2",[t._v("\n                "+t._s(e.name)+"\n                "),n("small",[t._v("\n                    "+t._s(e.cards.length)+" cards\n                ")]),n("el-checkbox",{attrs:{value:t.isSelected(e)},on:{change:function(n){t.selectList(e)}}},[t._v("\n                    select all cards\n                ")])],1):t._e(),e.cards.length>0?n("div",{staticClass:"lists"},[n("ul",{style:{width:330*e.cards.length+"px"}},t._l(e.cards,function(e){return n("Card",{key:e.id,attrs:{card:e,preview:t.preview,pdf:t.pdf}})}))]):t._e()])})],2)],1):t._e()},Fe=[];function je(t){n("MgF7")}var Pe=!1,Te=je,Me="data-v-c0a47ea8",Ae=null,Ne=Object(s["a"])(Oe,Ee,Fe,Pe,Te,Me,Ae),Ue=Ne.exports;r["default"].use($["a"]);var Re=new $["a"]({routes:[{path:"/",name:"home",component:It,alias:"/home"},{path:"/about",name:"about",component:At},{path:"/board/:id",name:"board",component:Ue}]});r["default"].use(x["a"]);var Ye=new x["a"].Store({state:{},mutations:{},actions:{}}),Ve=n("zL8q"),qe=n.n(Ve),De=n("QxPg"),Xe=n("U0v6"),Ze=n.n(Xe),Je=n("1P+R");n("tvR6");De["default"].library.add(Je["a"]),r["default"].use(qe.a),r["default"].component(Ze.a.name,Ze.a),r["default"].config.productionTip=!1,new r["default"]({router:Re,store:Ye,render:function(t){return t(S)}}).$mount("#app")},PIuy:function(t,e){},VPBE:function(t,e){},VUZU:function(t,e){},XU0V:function(t,e){},XXiO:function(t,e){},fZI6:function(t,e){},tvR6:function(t,e){}},[0]);
//# sourceMappingURL=app.7032cfa2.js.map